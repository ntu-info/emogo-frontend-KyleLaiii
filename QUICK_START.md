# EmoGo App - 快速開始指南

## ✅ 目前狀態

✓ 所有依賴已安裝
✓ Metro Bundler 正在運行於 http://localhost:8081
✓ 應用程式已配置完整權限（iOS + Android）
✓ 資料庫初始化已強化
✓ 所有語法問題已修復

---

## 🚀 現在開始測試

### 第一步：訪問 Web 界面

**在瀏覽器中打開：**
```
http://localhost:8081
```

你應該會看到：
- 藍色的 Expo Metro 菜單
- "Open in web" 等選項按鈕
- 顯示 "Expo" 標誌

### 第二步：在 iOS 上測試

#### 選項 A：使用 Expo Go（推薦用於快速測試）

**準備工作：**
1. 在 iPhone 上安裝 Expo Go
   - 開啟 App Store
   - 搜尋 "Expo Go"
   - 安裝官方應用程式（由 Expo 提供）

2. 確保 iPhone 和電腦在同一 Wi-Fi 網路

**開始測試：**
1. 回到終端/Metro 菜單
2. 應該看到一個 QR 碼
3. 在 iPhone 上打開 Expo Go 應用程式
4. 掃描 QR 碼
5. 等待應用程式加載（可能需要 30-60 秒首次加載）

**預期結果：**
- ✓ iPhone 螢幕會顯示 "EmoGo 影片紀錄" 標題
- ✓ 初始化進度消失後，完整介面應該顯示
- ✓ 應該看到"錄製影片"、情緒量表和按鈕

#### 選項 B：使用 iOS 模擬器（如果已安裝 Xcode）

在終端中按 `i` 將自動啟動 iOS 模擬器

---

## 🛠️ 如果應用程式無法加載

### 症狀 1：「無限旋轉，沒有菜單」

**第一步：檢查終端**
- 在 npm start 命令運行的終端中查看是否有紅色錯誤信息
- 複製任何錯誤訊息

**第二步：清除快取**
```powershell
# 停止 npm start（按 Ctrl+C）
# 然後運行：
npm start --clear
```

**第三步：檢查網路**
- 手機和電腦必須在同一 Wi-Fi
- 嘗試打開 iPhone 設置 > Wi-Fi 設置
- 如果有代理設定，嘗試禁用

### 症狀 2：「應用程式立即崩潰」

**檢查步驟：**
1. 查看終端是否有紅色 ERROR 信息
2. 應用程式內應該會顯示灰色的初始化錯誤訊息
3. 複製該訊息

### 症狀 3：「Expo Go 中'請求超時'」

```powershell
# 1. 停止 Metro
# (按 Ctrl+C 在運行 npm start 的終端)

# 2. 清除埠
Get-Process node | Stop-Process -Force

# 3. 等待 3 秒

# 4. 重新啟動
npm start --clear

# 5. 等待完全編譯，然後重新掃描 QR 碼
```

---

## 📋 測試清單

載入成功後，按以下順序測試功能：

### 1️⃣ 基礎介面 (應該立即看到)
- [ ] 看到 "EmoGo 影片紀錄" 標題
- [ ] 看到 "錄製影片" 部分
- [ ] 看到情緒量表（5 個選項）
- [ ] 看到兩個按鈕："輸出紀錄" 和 "查看過往紀錄"

### 2️⃣ 情緒量表
- [ ] 點擊每個情緒選項
- [ ] 該選項應該高亮顯示
- [ ] 應該看到確認訊息（"已選擇：...")

### 3️⃣ 視頻錄製
- [ ] 點擊 "開始錄影"
- [ ] 同意相機權限提示
- [ ] 看到實時計時器（秒數）
- [ ] 看到紅色指示燈表示正在錄製
- [ ] 說話或做某種動作至少 1 秒
- [ ] 點擊 "停止錄影"
- [ ] 應該看到綠色訊息："✓ 影片已錄製"

### 4️⃣ 輸出記錄
- [ ] 先完成步驟 2 和 3（選擇情緒和錄製視頻）
- [ ] 點擊 "輸出紀錄"
- [ ] 同意位置權限（如要求）
- [ ] 應該看到成功訊息
- [ ] 訊息應該顯示：
   - 選擇的情緒
   - GPS 座標（或"無"）

### 5️⃣ 查看記錄
- [ ] 點擊 "查看過往紀錄"
- [ ] 應該看到剛才保存的記錄
- [ ] 記錄應該顯示時間戳和情緒
- [ ] 點擊記錄展開
- [ ] 應該看到：
   - 位置資訊
   - 視頻播放器
   - 刪除按鈕
- [ ] 試著播放視頻（按播放按鈕）
- [ ] 視頻應該播放（或不支援某些格式）

### 6️⃣ 設定頁面
- [ ] 切換到 "Settings" 標籤（底部）
- [ ] 應該看到應用資訊
- [ ] 應該看到儲存空間統計
- [ ] 應該看到功能列表
- [ ] 應該看到 "清除所有資料" 按鈕

---

## 🔴 如果仍有問題

### 收集信息

請收集以下信息並共享：

1. **終端完整輸出**
   ```powershell
   # 檢查 npm start 命令運行的終端
   # 複製所有紅色或灰色的文字
   ```

2. **應用程式螢幕截圖**
   - 如果有錯誤訊息，請拍照
   - 如果只是旋轉，也請拍照

3. **環境信息**
   ```powershell
   node --version
   npm --version
   ```

4. **手機信息**
   - iOS 版本
   - iPhone 型號
   - 是否使用 Expo Go 或模擬器

### 快速修復步驟

1. **完全清潔安裝**
   ```powershell
   # 停止 npm start
   Get-Process node | Stop-Process -Force
   
   # 刪除依賴
   rm -r node_modules package-lock.json
   
   # 重新安裝
   npm install
   
   # 重新啟動
   npm start --clear
   ```

2. **檢查 npm 快取**
   ```powershell
   npm cache clean --force
   npm start --clear
   ```

3. **重啟電腦**
   - 有時可以解決埠和權限問題

---

## 📱 iOS 特定提示

### 常見權限問題

如果應用程式要求權限但沒有反應：

1. **相機權限被拒絕**
   - 設置 > 隱私 > 相機
   - 找到 EmoGo 或 Expo Go
   - 確保許可設定為"允許"

2. **位置權限被拒絕**
   - 設置 > 隱私 > 位置服務
   - 找到 EmoGo 或 Expo Go
   - 改為"使用時允許"

3. **麥克風權限被拒絕**
   - 設置 > 隱私 > 麥克風
   - 確保 EmoGo 或 Expo Go 被允許

### 本機存儲

- 視頻儲存在應用程式的私有文件系統中
- 位置由應用程式自動管理
- 在 Expo Go 中，卸載應用程式不會刪除資料（資料在 Expo Go 容器中）
- 可以在應用程式設定頁面清除所有資料

---

## 🎯 下一步

測試成功後，你可以：

1. **構建測試版本**
   ```powershell
   npx eas build --platform ios --profile preview
   ```

2. **提交到 App Store**
   ```powershell
   npx eas build --platform ios
   eas submit --platform ios
   ```

3. **添加更多功能**
   - 編輯表單
   - 導出數據
   - 更多分析

---

## 💡 有用的快捷鍵（Metro 菜單）

在 Metro 終端中：
- `i` - 打開 iOS 模擬器
- `a` - 打開 Android 模擬器
- `w` - 打開網頁版本
- `c` - 清除快取
- `r` - 重新加載
- `j` - 打開 debugger
- `m` - 切換網路模式
- `o` - 打開日誌面板
